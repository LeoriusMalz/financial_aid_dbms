# –°–µ—Ä–≤–∏—Å —Å–±–æ—Ä–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏

## üóÉÔ∏è ER-–î–∏–∞–≥—Ä–∞–º–º–∞

![ER Diagram](database/database_diagram.png)
[üîó](https://dbdiagram.io/d/fin_aid-68e29055d2b621e42255f8e5)

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### `users`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `user_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `name` | `VARCHAR(50)` | `NOT NULL` | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `surname` | `VARCHAR(50)` | `NOT NULL` | –§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `patronim` | `VARCHAR(50)` | ¬†| –û—Ç—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `phone` | `CHAR(18)` | `NOT NULL` | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |
| `tg_id` | `VARCHAR(12)` | `NOT NULL, UNIQUE` | Telegram ID |
| `tg_nick` | `VARCHAR(50)` | `UNIQUE` | Telegram nickname |
| `email` | `VARCHAR(50)` | `NOT NULL, UNIQUE` | –£—á–µ–±–Ω–∞—è –ø–æ—á—Ç–∞ |
| `group_id` | `INT` |  | ID –≥—Ä—É–ø–ø—ã |
| `role_id` | `INT` | `NOT NULL, DEFAULT 1` | ID —Ä–æ–ª–∏ |

### `groups`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `group_id` | `INT` | `PRIMARY KEY` | ID –≥—Ä—É–ø–ø—ã |
| `group` | `VARCHAR(10)` | `NOT NULL, UNIQUE` | –ù–æ–º–µ—Ä –≥—Ä—É–ø–ø—ã |
| `year` | `INT` | `NOT NULL` | –ì–æ–¥ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞ |

### `roles`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `role_id` | `INT` | `PRIMARY KEY` | ID —Ä–æ–ª–∏ |
| `role` | `VARCHAR(50)` | `NOT NULL, UNIQUE` | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏ |

–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- 1: —Å—Ç—É–¥–µ–Ω—Ç
- 2: –≥–ª–∞–≤–∞ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
- 3: —Å—Ç–∞—Ä–æ—Å—Ç–∞ –∫—É—Ä—Å–∞
- 4: –Ω–∞—á–∞–ª—å–Ω–∏–∫ –∫—É—Ä—Å–∞ (—Å—Ç–∞—Ä–æ—Å—Ç–∞ —Å–≤–æ–µ–≥–æ –∫—É—Ä—Å–∞ –∏ 1-–≥–æ –∫—É—Ä—Å–∞)
- 5: —Å—Ç–∏–ø–µ–Ω–¥–∏–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è

### `departments`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `depart_id` | `INT` | `PRIMARY KEY` | ID –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |
| `depart` | `VARCHAR(50)` | `NOT NULL, UNIQUE` | –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |

–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- 1: —É—á–µ–±–Ω—ã–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
- 2: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
- 3: PR-–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
- 4: —Ö–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
- 5: –î–ö–° (–¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –∫—É–ª—å—Ç—É—Ä—ã –∏ —Å–ø–æ—Ä—Ç–∞)

#### `users_departments`
(–¥–ª—è —Å–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü `users` –∏ `departments` "–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º")

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `user_id` | `INT` | `PRIMARY KEY` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `depart_id` | `INT` | `PRIMARY KEY` | ID –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ |

---

### `applications`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `app_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID –∑–∞—è–≤–ª–µ–Ω–∏—è |
| `user_id` | `INT` | `NOT_NULL` | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `request_amount` | `INT` | `NOT NULL, DEFAULT 0, CHECK (>= 0)` | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—É–º–º–∞ |
| `recomm_amount` | `INT` | `NOT NULL, CHECK (>= 0)` | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—É–º–º–∞ –æ—Ç —Å—Ç–∞—Ä–æ—Å—Ç—ã/–≥–ª–∞–≤—ã |
| `final_amount` | `INT` | `NOT NULL, CHECK (>= 0)` | –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –æ—Ç –∫–æ–º–∏—Å—Å–∏–∏ |
| `user_comment` | `VARCHAR(100)` | `DEFAULT ""` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `head_comment` | `VARCHAR(100)` | `DEFAULT ""` | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å—Ç–∞—Ä–æ—Å—Ç—ã/–≥–ª–∞–≤—ã |
| `approve` | `BOOL` | `DEFAULT False` | –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–ª–µ–Ω–∏—è –∫–æ–º–∏—Å—Å–∏–µ–π |
| `file` | `BLOB` | `NOT NULL` | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –∑–∞—è–≤–ª–µ–Ω–∏–µ–º |
| `date` | `DATE` | `NOT NULL, DEFAULT DATE('now')` | –î–∞—Ç–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–ª–µ–Ω–∏—è |
| `fund_id` | `INT` | `NOT NULL` | ID —Å–±–æ—Ä–∞ |

### `categories`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `cat_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `cat_name` | `VARCHAR(30)` | `NOT NULL, UNIQUE` | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |

#### `applications_categories`
(–¥–ª—è —Å–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü `applications` –∏ `categories` "–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º")

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `app_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID –∑–∞—è–≤–ª–µ–Ω–∏—è |
| `cat_id` | `INT` | `PRIMARY KEY` | ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `amount` | `INT` | `NOT NULL, DEFAULT 0, CHECK (>= 0)` | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–∞—è —Å—É–º–º–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |

### `tags`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `tag_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID —Ç–µ–≥–∞ |
| `tag` | `VARCHAR(30)` | `NOT NULL, UNIQUE` | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| `creator_id` | `INT` |  | ID —Å–æ–∑–¥–∞—Ç–µ–ª—è –º–µ—Ç–∫–∏ |

#### `applications_tags`
(–¥–ª—è —Å–≤—è–∑–∏ —Ç–∞–±–ª–∏—Ü `applications` –∏ `tags` "–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º")

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `app_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID –∑–∞—è–≤–ª–µ–Ω–∏—è |
| `tag_id` | `INT` | `PRIMARY KEY` | ID —Ç–µ–≥–∞ |
| `installer_id` | `INT` | `NOT NULL` | ID —É—Å—Ç–∞–Ω–æ–≤–∏–≤—à–µ–≥–æ –º–µ—Ç–∫—É |

---

### `fundings`

| –ü–æ–ª–µ | –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|------------|-------------|-----------|
| `fund_id` | `INT` | `PRIMARY KEY, AUTO_INCREMENT` | ID —Å–±–æ—Ä–∞ |
| `start_date` | `DATE` | `NOT NULL, DEFAULT DATE('now')` | –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å–±–æ—Ä–∞ |
| `end_date` | `DATE` | `NOT NULL, DEFAULT DATE('now', '+5 days'), CHECK (> start_date)` | –î–∞—Ç–∞ –∫–æ–Ω—Ü–∞ —Å–±–æ—Ä–∞ |
| `creator_id` | `INT` | `NOT NULL` | ID —Å–æ–∑–¥–∞–≤—à–µ–≥–æ —Å–±–æ—Ä |
| `table_file` | `BLOB` |  | –ü—É—Ç—å –∫ —Ç–∞–±–ª–∏—Ü–µ —Å –∑–∞—è–≤–ª–µ–Ω–∏—è–º–∏ |

